<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>记忆挑战：嫚嫚的专属游戏</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            love: {
              light: '#FFD7E5',
              DEFAULT: '#FF6B9B',
              dark: '#FF1493'
            }
          },
          fontFamily: {
            love: ['"Comic Sans MS"', 'cursive', 'sans-serif']
          }
        }
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .card-flip {
        perspective: 1000px;
        transform-style: preserve-3d;
      }
      .card-front, .card-back {
        backface-visibility: hidden;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .card-back {
        transform: rotateY(180deg);
      }
      .card-flipped .card-front {
        transform: rotateY(180deg);
      }
      .card-flipped .card-back {
        transform: rotateY(0deg);
      }
      .heart-beat {
        animation: heartBeat 1s infinite alternate;
      }
      .celebration {
        animation: celebration 1s ease-out;
      }
      .memory-active {
        cursor: default;
      }
      .success {
        animation: success 0.5s ease-out;
      }
      .error {
        animation: error 0.5s ease-out;
      }
    }
    
    @keyframes heartBeat {
      0% { transform: scale(1); }
      100% { transform: scale(1.1); }
    }
    
    @keyframes celebration {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.2); opacity: 0.8; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    @keyframes success {
      0% { background-color: #fff; }
      50% { background-color: #8BC34A; }
      100% { background-color: #fff; }
    }
    
    @keyframes error {
      0% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      50% { transform: translateX(10px); }
      75% { transform: translateX(-10px); }
      100% { transform: translateX(0); }
    }
    
    /* 背景爱心效果 */
    .heart-bg {
      position: absolute;
      width: 20px;
      height: 20px;
      opacity: 0;
      background-color: #FF6B9B;
      transform: rotate(45deg);
      animation: floatHeart 8s linear forwards;
    }
    
    .heart-bg:before, .heart-bg:after {
      content: '';
      width: 20px;
      height: 20px;
      background-color: #FF6B9B;
      border-radius: 50%;
      position: absolute;
    }
    
    .heart-bg:before {
      top: -10px;
      left: 0;
    }
    
    .heart-bg:after {
      top: 0;
      left: -10px;
    }
    
    @keyframes floatHeart {
      0% {
        transform: rotate(45deg) translateY(0) scale(0.3);
        opacity: 0;
      }
      10% {
        opacity: 0.8;
      }
      90% {
        opacity: 0.8;
      }
      100% {
        transform: rotate(45deg) translateY(-100vh) scale(0.3);
        opacity: 0;
      }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-love-light to-white min-h-screen font-love overflow-x-hidden">
  <!-- 背景爱心效果 -->
  <div id="heart-bg-container" class="fixed inset-0 pointer-events-none z-0"></div>
  
  <!-- 游戏容器 -->
  <div id="game-container" class="relative w-full min-h-screen flex flex-col items-center justify-center z-10">
    
    <!-- 欢迎界面 -->
    <div id="welcome-screen" class="absolute inset-0 flex flex-col items-center justify-center bg-white/80 backdrop-blur-sm z-30">
      <div class="text-center p-8 rounded-2xl bg-white shadow-2xl max-w-md w-full mx-4 transform transition-all duration-500 hover:shadow-love/30">
        <h1 class="text-[clamp(2.5rem,8vw,4rem)] font-bold text-transparent bg-clip-text bg-gradient-to-r from-love-dark to-love heart-beat mb-6">
          记忆挑战：<br>嫚嫚的专属游戏
        </h1>
        <p class="text-gray-600 text-lg mb-8">
          测试你的记忆力！记住所有卡片的位置和内容，然后按顺序点击它们。
        </p>
        
        <!-- 难度选择 -->
        <div class="border-2 border-dashed border-love rounded-lg p-4 mb-6">
          <h3 class="text-xl font-semibold text-love-dark mb-4">选择难度</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
            <button class="difficulty-btn bg-love text-white py-2 px-4 rounded-lg shadow-md" data-rows="3" data-cols="4">
              简单 (3×4)
            </button>
            <button class="difficulty-btn bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-love hover:text-white transition-colors" data-rows="4" data-cols="4">
              中等 (4×4)
            </button>
            <button class="difficulty-btn bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-love hover:text-white transition-colors" data-rows="4" data-cols="5">
              困难 (4×5)
            </button>
          </div>
        </div>
        
        <div class="flex flex-col space-y-4">
          <button id="start-game-btn" class="bg-gradient-to-r from-love-dark to-love text-white py-4 px-10 rounded-full text-xl font-semibold shadow-lg hover:shadow-xl transform transition-all duration-300 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-dark">
            开始挑战 <i class="fa fa-heart ml-2"></i>
          </button>
          <button id="how-to-play-btn" class="bg-gray-200 text-gray-700 py-4 px-10 rounded-full text-xl font-semibold shadow-lg hover:shadow-xl transform transition-all duration-300 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400">
            游戏规则 <i class="fa fa-question-circle ml-2"></i>
          </button>
        </div>
      </div>
    </div>
    
    <!-- 游戏规则界面 -->
    <div id="rules-screen" class="absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm z-40 hidden">
      <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-500">
        <h2 class="text-2xl font-bold text-love-dark mb-4">游戏规则</h2>
        <ul class="space-y-3 text-gray-700 mb-6">
          <li class="flex items-start">
            <i class="fa fa-heart text-love mt-1 mr-3"></i>
            <span>游戏开始后，所有卡片会翻转显示一段时间</span>
          </li>
          <li class="flex items-start">
            <i class="fa fa-heart text-love mt-1 mr-3"></i>
            <span>你需要记住每张卡片的位置和内容</span>
          </li>
          <li class="flex items-start">
            <i class="fa fa-heart text-love mt-1 mr-3"></i>
            <span>卡片翻回后，按正确顺序点击它们</span>
          </li>
          <li class="flex items-start">
            <i class="fa fa-heart text-love mt-1 mr-3"></i>
            <span>点击顺序正确的卡片会保持翻开状态</span>
          </li>
          <li class="flex items-start">
            <i class="fa fa-heart text-love mt-1 mr-3"></i>
            <span>如果点击错误，所有卡片会重新洗牌</span>
          </li>
          <li class="flex items-start">
            <i class="fa fa-heart text-love mt-1 mr-3"></i>
            <span>目标是用最少的尝试记住所有卡片位置</span>
          </li>
        </ul>
        <button id="close-rules-btn" class="w-full bg-gradient-to-r from-love-dark to-love text-white py-3 px-6 rounded-full text-lg font-semibold shadow-lg hover:shadow-xl transform transition-all duration-300 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-dark">
          我明白了
        </button>
      </div>
    </div>
    
    <!-- 游戏界面 -->
    <div id="game-screen" class="absolute inset-0 hidden flex flex-col items-center justify-center">
      <!-- 游戏信息 -->
      <div class="w-full max-w-5xl flex justify-between items-center mb-6 px-4">
        <div class="flex items-center">
          <div class="w-6 h-6 rounded-full bg-love mr-3 heart-beat"></div>
          <div>
            <div class="font-bold">小媳妇</div>
            <div class="text-sm">尝试次数: <span id="attempts">0</span></div>
          </div>
        </div>
        
        <div class="text-center">
          <div class="text-lg font-bold" id="game-status">记忆阶段</div>
          <div class="text-sm" id="timer">00:00</div>
          <div class="text-xs text-gray-500 mt-1" id="difficulty-display">难度: 简单 (3×4)</div>
        </div>
        
        <div class="flex items-center">
          <div>
            <div class="font-bold text-right">进度</div>
            <div class="text-sm text-right"><span id="progress">0</span>/<span id="total-cards">12</span></div>
          </div>
          <div class="w-6 h-6 rounded-full bg-love ml-3"></div>
        </div>
      </div>
      
      <!-- 卡片网格 -->
      <div id="card-grid" class="grid grid-cols-4 gap-3 max-w-5xl w-full px-4">
        <!-- 卡片将通过JavaScript动态生成 -->
      </div>
      
      <!-- 游戏控制 -->
      <div class="mt-8 flex space-x-4">
        <button id="restart-game-btn" class="bg-gray-200 text-gray-700 py-3 px-6 rounded-full text-lg font-semibold shadow-lg hover:shadow-xl transform transition-all duration-300 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400">
          重新开始 <i class="fa fa-refresh ml-2"></i>
        </button>
        <button id="quit-game-btn" class="bg-love text-white py-3 px-6 rounded-full text-lg font-semibold shadow-lg hover:shadow-xl transform transition-all duration-300 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-dark">
          退出游戏 <i class="fa fa-sign-out ml-2"></i>
        </button>
      </div>
    </div>
    
    <!-- 游戏结束界面 -->
    <div id="game-over-screen" class="absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm z-40 hidden">
      <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4 text-center transform transition-all duration-500">
        <h2 class="text-3xl font-bold text-love-dark mb-4">挑战完成！</h2>
        <p class="text-lg mb-2">嫚嫚的成绩</p>
        <div class="grid grid-cols-2 gap-6 mb-6">
          <div class="bg-love-light rounded-lg p-4">
            <div class="font-bold text-love-dark">用时</div>
            <div class="text-2xl font-bold" id="final-time">00:00</div>
          </div>
          <div class="bg-love-light rounded-lg p-4">
            <div class="font-bold text-love-dark">尝试次数</div>
            <div class="text-2xl font-bold" id="final-attempts">0</div>
          </div>
        </div>
        <p class="text-xl font-bold mb-6 text-love-dark">
          太棒啦,嫚总!你的记忆力太棒啦,爱你哦！
        </p>
        <button id="play-again-btn" class="bg-gradient-to-r from-love-dark to-love text-white py-4 px-10 rounded-full text-xl font-semibold shadow-lg hover:shadow-xl transform transition-all duration-300 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-dark">
          再玩一次 <i class="fa fa-heart ml-2"></i>
        </button>
      </div>
    </div>
  </div>

  <script>
    // 游戏配置
    const config = {
      rows: 3,
      cols: 4,
      memoryTime: 10, // 记忆秒数
      // 默认示例图片，可替换为你们的照片
      defaultImages: [
        'https://picsum.photos/seed/couple1/200/200',
        'https://picsum.photos/seed/couple2/200/200',
        'https://picsum.photos/seed/couple3/200/200',
        'https://picsum.photos/seed/couple4/200/200',
        'https://picsum.photos/seed/couple5/200/200',
        'https://picsum.photos/seed/couple6/200/200',
        'https://picsum.photos/seed/couple7/200/200',
        'https://picsum.photos/seed/couple8/200/200',
        'https://picsum.photos/seed/couple9/200/200',
        'https://picsum.photos/seed/couple10/200/200',
        'https://picsum.photos/seed/couple11/200/200',
        'https://picsum.photos/seed/couple12/200/200',
        'https://picsum.photos/seed/couple13/200/200',
        'https://picsum.photos/seed/couple14/200/200',
        'https://picsum.photos/seed/couple15/200/200',
        'https://picsum.photos/seed/couple16/200/200',
        'https://picsum.photos/seed/couple17/200/200',
        'https://picsum.photos/seed/couple18/200/200',
        'https://picsum.photos/seed/couple19/200/200',
        'https://picsum.photos/seed/couple20/200/200'
      ],
      cardBack: 'https://picsum.photos/seed/cardback/200/200'
    };
    
    // 游戏状态
    const gameState = {
      attempts: 0,
      startTime: null,
      timerInterval: null,
      memoryInterval: null,
      memoryTimeRemaining: config.memoryTime,
      currentSequence: [],
      correctSequence: [],
      flippedCards: [],
      matchedCards: [],
      gameOver: false,
      cards: [],
      gamePhase: 'memory' // 'memory' 或 'recall'
    };
    
    // DOM元素
    const welcomeScreen = document.getElementById('welcome-screen');
    const rulesScreen = document.getElementById('rules-screen');
    const gameScreen = document.getElementById('game-screen');
    const gameOverScreen = document.getElementById('game-over-screen');
    const startGameBtn = document.getElementById('start-game-btn');
    const howToPlayBtn = document.getElementById('how-to-play-btn');
    const closeRulesBtn = document.getElementById('close-rules-btn');
    const restartGameBtn = document.getElementById('restart-game-btn');
    const quitGameBtn = document.getElementById('quit-game-btn');
    const playAgainBtn = document.getElementById('play-again-btn');
    const cardGrid = document.getElementById('card-grid');
    const gameStatus = document.getElementById('game-status');
    const timer = document.getElementById('timer');
    const attempts = document.getElementById('attempts');
    const progress = document.getElementById('progress');
    const totalCards = document.getElementById('total-cards');
    const finalTime = document.getElementById('final-time');
    const finalAttempts = document.getElementById('final-attempts');
    const heartBgContainer = document.getElementById('heart-bg-container');
    const difficultyBtns = document.querySelectorAll('.difficulty-btn');
    const difficultyDisplay = document.getElementById('difficulty-display');
    
    // 初始化事件监听
    function initEventListeners() {
      startGameBtn.addEventListener('click', startGame);
      howToPlayBtn.addEventListener('click', showRules);
      closeRulesBtn.addEventListener('click', hideRules);
      restartGameBtn.addEventListener('click', restartGame);
      quitGameBtn.addEventListener('click', quitGame);
      playAgainBtn.addEventListener('click', playAgain);
      
      // 难度选择
      difficultyBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          // 移除所有按钮的选中状态
          difficultyBtns.forEach(b => {
            b.classList.remove('bg-love', 'text-white', 'shadow-md');
            b.classList.add('bg-gray-200', 'text-gray-700');
          });
          
          // 设置当前按钮为选中状态
          btn.classList.remove('bg-gray-200', 'text-gray-700');
          btn.classList.add('bg-love', 'text-white', 'shadow-md');
          
          // 更新配置
          config.rows = parseInt(btn.dataset.rows);
          config.cols = parseInt(btn.dataset.cols);
          
          // 根据难度调整记忆时间
          if (config.rows === 3 && config.cols === 4) {
            config.memoryTime = 10;
          } else if (config.rows === 4 && config.cols === 4) {
            config.memoryTime = 15;
          } else if (config.rows === 4 && config.cols === 5) {
            config.memoryTime = 20;
          }
        });
      });
    }
    
    // 显示规则
    function showRules() {
      rulesScreen.classList.remove('hidden');
    }
    
    // 隐藏规则
    function hideRules() {
      rulesScreen.classList.add('hidden');
    }
    
    // 开始游戏
    function startGame() {
      welcomeScreen.classList.add('hidden');
      gameScreen.classList.remove('hidden');
      
      // 更新难度显示
      let difficultyText;
      if (config.rows === 3 && config.cols === 4) {
        difficultyText = '简单 (3×4)';
      } else if (config.rows === 4 && config.cols === 4) {
        difficultyText = '中等 (4×4)';
      } else if (config.rows === 4 && config.cols === 5) {
        difficultyText = '困难 (4×5)';
      }
      difficultyDisplay.textContent = `难度: ${difficultyText}`;
      
      // 初始化游戏状态
      gameState.attempts = 0;
      gameState.startTime = new Date();
      gameState.timerInterval = setInterval(updateTimer, 1000);
      gameState.memoryTimeRemaining = config.memoryTime;
      gameState.currentSequence = [];
      gameState.correctSequence = [];
      gameState.flippedCards = [];
      gameState.matchedCards = [];
      gameState.gameOver = false;
      gameState.gamePhase = 'memory';
      
      // 更新UI
      attempts.textContent = gameState.attempts;
      progress.textContent = gameState.matchedCards.length;
      totalCards.textContent = config.rows * config.cols;
      gameStatus.textContent = `记忆阶段 (${gameState.memoryTimeRemaining}秒)`;
      timer.textContent = '00:00';
      
      // 创建卡片
      createCards();
      
      // 开始背景爱心动画
      startHeartBackground();
      
      // 开始记忆倒计时
      gameState.memoryInterval = setInterval(updateMemoryTimer, 1000);
    }
    
    // 创建卡片
    function createCards() {
      // 清空卡片网格
      cardGrid.innerHTML = '';
      
      // 计算需要的图片数量
      const totalCards = config.rows * config.cols;
      
      // 准备卡片数据
      const images = config.defaultImages.slice(0, totalCards);
      
      // 打乱顺序
      shuffleArray(images);
      
      // 设置网格列数
      cardGrid.style.gridTemplateColumns = `repeat(${config.cols}, 1fr)`;
      
      // 创建卡片元素
      for (let i = 0; i < totalCards; i++) {
        const card = document.createElement('div');
        card.className = 'card-flip cursor-pointer memory-active';
        card.dataset.index = i;
        card.dataset.image = images[i];
        card.dataset.order = i; // 记录正确顺序
        
        // 卡片正面
        const cardFront = document.createElement('div');
        cardFront.className = 'card-front absolute inset-0 bg-white rounded-lg shadow-md flex items-center justify-center';
        cardFront.innerHTML = `<img src="${config.cardBack}" alt="卡片背面" class="w-full h-full object-cover rounded-lg">`;
        
        // 卡片背面（图片）
        const cardBack = document.createElement('div');
        cardBack.className = 'card-back absolute inset-0 bg-white rounded-lg shadow-md flex items-center justify-center';
        cardBack.innerHTML = `<img src="${images[i]}" alt="卡片正面" class="w-full h-full object-cover rounded-lg">`;
        
        // 添加卡片到网格
        card.appendChild(cardFront);
        card.appendChild(cardBack);
        cardGrid.appendChild(card);
        
        // 添加点击事件
        card.addEventListener('click', () => clickCard(card));
        
        // 初始状态为翻开（记忆阶段）
        card.classList.add('card-flipped');
      }
      
      // 保存卡片引用
      gameState.cards = document.querySelectorAll('.card-flip');
      
      // 记录正确顺序
      gameState.correctSequence = Array.from({length: totalCards}, (_, i) => i);
    }
    
    // 点击卡片
    function clickCard(card) {
      // 如果游戏结束、不在回忆阶段、卡片已匹配，则忽略点击
      if (gameState.gameOver || 
          gameState.gamePhase !== 'recall' || 
          gameState.matchedCards.includes(card)) {
        return;
      }
      
      // 翻转卡片
      card.classList.add('card-flipped');
      gameState.currentSequence.push(parseInt(card.dataset.order));
      
      // 检查是否点击正确
      checkSequence();
    }
    
    // 检查点击顺序
    function checkSequence() {
      const currentIndex = gameState.currentSequence.length - 1;
      
      // 如果当前点击顺序正确
      if (gameState.currentSequence[currentIndex] === gameState.correctSequence[currentIndex]) {
        // 添加成功动画
        gameState.cards[gameState.currentSequence[currentIndex]].classList.add('success');
        
        // 记录为已匹配
        gameState.matchedCards.push(gameState.cards[gameState.currentSequence[currentIndex]]);
        
        // 更新进度
        progress.textContent = gameState.matchedCards.length;
        
        // 检查游戏是否结束
        if (gameState.matchedCards.length === gameState.cards.length) {
          setTimeout(endGame, 1000);
          return;
        }
      } else {
        // 点击顺序错误
        gameState.cards.forEach(card => {
          // 错误动画
          if (!gameState.matchedCards.includes(card)) {
            card.classList.add('error');
          }
        });
        
        // 增加尝试次数
        gameState.attempts++;
        attempts.textContent = gameState.attempts;
        
        // 延迟后重置卡片
        setTimeout(() => {
          gameState.cards.forEach(card => {
            if (!gameState.matchedCards.includes(card)) {
              card.classList.remove('card-flipped', 'error');
            }
          });
          
          // 重置当前序列
          gameState.currentSequence = [];
        }, 1000);
      }
    }
    
    // 更新记忆计时器
    function updateMemoryTimer() {
      gameState.memoryTimeRemaining--;
      gameStatus.textContent = `记忆阶段 (${gameState.memoryTimeRemaining}秒)`;
      
      if (gameState.memoryTimeRemaining <= 0) {
        clearInterval(gameState.memoryInterval);
        
        // 切换到回忆阶段
        gameState.gamePhase = 'recall';
        gameStatus.textContent = '回忆阶段';
        
        // 翻转所有卡片
        gameState.cards.forEach(card => {
          card.classList.remove('memory-active');
          card.classList.remove('card-flipped');
        });
      }
    }
    
    // 更新计时器
    function updateTimer() {
      const now = new Date();
      const elapsed = Math.floor((now - gameState.startTime) / 1000);
      const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
      const seconds = (elapsed % 60).toString().padStart(2, '0');
      timer.textContent = `${minutes}:${seconds}`;
    }
    
    // 结束游戏
    function endGame() {
      gameState.gameOver = true;
      clearInterval(gameState.timerInterval);
      
      // 显示游戏结束界面
      finalTime.textContent = timer.textContent;
      finalAttempts.textContent = gameState.attempts;
      
      gameOverScreen.classList.remove('hidden');
    }
    
    // 重新开始游戏
    function restartGame() {
      // 清除计时器
      clearInterval(gameState.timerInterval);
      clearInterval(gameState.memoryInterval);
      
      // 重新开始
      startGame();
    }
    
    // 退出游戏
    function quitGame() {
      // 清除计时器
      clearInterval(gameState.timerInterval);
      clearInterval(gameState.memoryInterval);
      
      gameScreen.classList.add('hidden');
      welcomeScreen.classList.remove('hidden');
      
      // 停止背景爱心动画
      stopHeartBackground();
    }
    
    // 再玩一次
    function playAgain() {
      gameOverScreen.classList.add('hidden');
      restartGame();
    }
    
    // 打乱数组
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
    
    // 创建背景爱心
    function createHeart() {
      const heart = document.createElement('div');
      heart.className = 'heart-bg';
      
      // 随机位置和大小
      const x = Math.random() * window.innerWidth;
      const size = 10 + Math.random() * 30;
      
      heart.style.left = `${x}px`;
      heart.style.width = `${size}px`;
      heart.style.height = `${size}px`;
      
      // 随机颜色
      const hue = 340 + Math.random() * 40; // 粉色系
      const lightness = 50 + Math.random() * 30; // 50-80%
      heart.style.backgroundColor = `hsl(${hue}, 100%, ${lightness}%)`;
      
      // 随机动画延迟
      heart.style.animationDelay = `${Math.random() * 10}s`;
      
      // 设置伪元素颜色
      const style = document.createElement('style');
      style.textContent = `
        .heart-bg:before, .heart-bg:after {
          background-color: hsl(${hue}, 100%, ${lightness}%);
        }
      `;
      heart.appendChild(style);
      
      // 添加到容器
      heartBgContainer.appendChild(heart);
      
      // 动画结束后移除
      setTimeout(() => {
        if (heart.parentNode === heartBgContainer) {
          heartBgContainer.removeChild(heart);
        }
      }, 8000);
    }
    
    // 开始背景爱心动画
    let heartInterval;
    function startHeartBackground() {
      // 先清空现有爱心
      heartBgContainer.innerHTML = '';
      
      // 每隔一段时间创建新爱心
      heartInterval = setInterval(createHeart, 300);
      
      // 初始创建一些爱心
      for (let i = 0; i < 10; i++) {
        setTimeout(createHeart, i * 100);
      }
    }
    
    // 停止背景爱心动画
    function stopHeartBackground() {
      clearInterval(heartInterval);
      heartBgContainer.innerHTML = '';
    }
    
    // 初始化游戏
    initEventListeners();
  </script>
</body>
</html>